!function(){window.gDict={page:0,pageMax:0,xhrUnlock:!0,dynmSearch:!0},window.kqe={toggles:$(".Toggle[data-x]"),rightNavi:$(".TabHead.RightNavi[data-tab=RightNavi]"),condName:$("#CondName"),search:$("#Search"),pagePrev:$(".PagePrev"),pageNext:$(".PageNext"),tips:$(".Tips")},window.kqv={page:$(".sPage"),pageMax:$(".sPageMax")},kqv.items=window.items,delete window.items,window.kqf={retab:function(){$(".TabHead[data-tab]").unbind("click").click(function(){if(""==this.dataset.stop)return!1;var a,t,e=this.dataset.tab,i=this.dataset.page,s=this.dataset.func;return!!e&&(a=$(".TabHead[data-tab="+e+"]"),t=$(".TabItem[data-tab="+e+"]"),i&&(a.filter(":not([data-page="+i+"])").removeClass("active"),$(this).addClass("active"),t.filter(":not([data-page="+i+"])").addClass("hide"),t.filter("[data-page="+i+"]").removeClass("hide")),void(s&&(a.filter(":not([data-func="+s+"])").removeClass("active"),$(this).addClass("active"),kqf["tab"+e](s))))})},dealer:function(a){var t,e=a[0],i=kqv.cards;kqv.page.html(gDict.page=~~a[1]),kqv.pageMax.html(gDict.pageMax=~~a[2]);for(t in i)i[t].addClass("hide");for(t in e){var s=i[t],n=e[t];s[0].dataset.id=n.id,s.find(".sTitle").html("&lt;"+n.title+"&gt;"+n.name),s.find(".sCost").html(n.cost),s.find(".sStar").html(n.star||""),s.find(".sJob").html(n.job),s.find(".sAttr").html(n.attr),s.find(".sKind").html(n.kind),s.find(".sRare").html(n.rare),s.find(".sHP").html(n.hp),s.find(".sAD").html(n.ad),s.find(".sAP").html(n.ap),s.find(".sHQ").html(n.hq),s.find(".sThumb").attr("src",""),s.find(".sThumb").attr("src","https://raw.githubusercontent.com/kairiquery/kqp"+kq.conds.serv+"20/master/"+n.id+".png");var d=["awaken","normal","suport3"];for(var r in d){var l=d[r],o=n.skill[l]||[],c=0,m=s.find(".TabItem.Skill[data-page="+l+"]"),p=m.find(".TabHeader.SkillContent").empty(),f=m.find(".TabBox.SkillContent").empty();o.length||o.push({cond:"&nbsp;",content:"无"});for(var h in o){var g=o[h],k=$("<a>").addClass("TabHead").addClass("SkillContent").html(g.cond||"无").appendTo(p);k[0].dataset.tab="Skill"+t+l,k[0].dataset.page=c,"无"==k.html()&&h>0&&k.css("width","20%");var v='<span class="bfrTextRoles"></span>';for(var b in g.content)v+='<span class="TextRole">'+(g.content[b]||"无")+"</span>";v+='<span class="bfrTextRoles"></span>';var u=$("<div>").addClass("TabItem").addClass("SkillContent").html(v).appendTo(f);u[0].dataset.tab="Skill"+t+l,u[0].dataset.page=c++}p.find(":first-child").addClass("active")}var q=kq.conds.mark[0][7]?2:"通用"!=n.job?0:1;s.find(".TabHead.Skill").removeClass("primary").filter("[data-page="+d[q]+"]").addClass("primary"),s.removeClass("hide")}kqf.retab(),$(".TabHead.Skill.primary").click()},tabServ:function(a){kq.conds.serv=a,kqe.search.click()}}}(),function(){window.kq={conds:{serv:"cn",name:"",mark:[[]]},param:function(a){var t=$.extend({},kq.conds,{page:gDict.page,mark:kq.conds.mark.toString().replace(/\,/g,"~"),zero:/[1-9]/.test(kq.conds.mark.toString())?0:1});return a&&a(t),t},query:function(a,t,e,i){if(gDict.xhrUnlock)return gDict.xhrUnlock=!1,$.get({url:"kq/q",data:kq.param(a),success:t}).fail(e).always(function(){gDict.xhrUnlock=!0,i&&i()})}}}();
!function(){d.f.pageTurn=function(e){d.t.get("af/ls",{p:"number"==typeof e&&e?e:1},function(e){d.e.records.map(function(a,i){var d=e.records[i];if(d){var t=d.info,n={};t.map(function(e){e.map(function(e){"m"==e.name&&(n[e.text]=!0)})}),a.find(".sName").html(d.name),a.find(".sLink").attr("href","http://"+d.main[0]),a.find(".sMain").html(Object.keys(n).join("; "))}a.children()[d?"removeClass":"addClass"]("hide"),a[d?"removeClass":"addClass"]("hidden")}),d.t.pagerDeal(e.now,e.max,d.v.pager.record)})}}(),function(){d.t.pager("record",d.e.RecordPrev,d.e.RecordNext,function(e){d.e.RecordPage.val(e.now)},d.e.RecordPageMax,d.f.pageTurn),d.t.taber("RightNavi",d.e.TabHeadRightNavi,d.e.TabItemRightNavi,["Basic","Config","About"],"active"),d.t.taber("RightNavi2",d.e.TabHeadRightNavi2,d.e.TabItemRightNavi2,["Basic","Info","Rule","Elem"],"active"),d.t.swier("infoType",d.e.InfoType,["文本","密码","复选"]),d.e.Search.on("click",d.f.pageTurn)}(),function(){d.e.Search.click(),d.e.TabHeadRightNavi.first().click(),d.e.TabHeadRightNavi2.first().click(),d.e.InfoType.click()}();